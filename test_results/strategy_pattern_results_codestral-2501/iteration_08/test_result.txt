TEST_STATUS: FAILURE
DIFF_STATUS: SUCCESS
RETURNCODE: 1
TIMESTAMP: 2026-02-08T21:50:00.732765

=== PYTEST STDOUT ===
============================= test session starts =============================
platform win32 -- Python 3.14.2, pytest-9.0.2, pluggy-0.1.dev945+g0cf9e32a7.d20260207
benchmark: 5.2.3 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: C:\Users\ronal\colorama_testing
configfile: pyproject.toml
plugins: anyio-4.12.1, hypothesis-6.148.8, benchmark-5.2.3, cov-7.0.0
collected 66 items

colorama\tests\ansi_test.py ...                                          [  4%]
colorama\tests\ansitowin32_test.py ......F................               [ 39%]
colorama\tests\initialise_test.py ssssssssss.                            [ 56%]
colorama\tests\isatty_test.py .......                                    [ 66%]
colorama\tests\refactoring_test.py .ss.ss                                [ 75%]
colorama\tests\test_coverage.py ..F.....                                 [ 87%]
colorama\tests\winterm_test.py ........                                  [100%]

================================== FAILURES ===================================
___________________ AnsiToWin32Test.testCallWin32UsesLookup ___________________

self = <colorama.tests.ansitowin32_test.AnsiToWin32Test testMethod=testCallWin32UsesLookup>

    def testCallWin32UsesLookup(self):
        listener = Mock()
        stream = AnsiToWin32(listener)
        stream.win32_calls = {
            1: (lambda *_, **__: listener(11),),
            2: (lambda *_, **__: listener(22),),
            3: (lambda *_, **__: listener(33),),
        }
>       stream.call_win32('m', (3, 1, 99, 2))

colorama\tests\ansitowin32_test.py:219: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <colorama.ansitowin32.AnsiToWin32 object at 0x000001C1949BC6E0>
command = 'm', params = (3, 1, 99, 2)

    def call_win32(self, command, params):
        if command in self.WIN32_STRATEGIES:
>           self.WIN32_STRATEGIES[command](params)
E           TypeError: AnsiToWin32._strategy_m() missing 1 required positional argument: 'params'

colorama\ansitowin32.py:247: TypeError
______________________ test_ansitowin32_state_and_calls _______________________

    def test_ansitowin32_state_and_calls():
        wrapper = ansitowin32.StreamWrapper(Mock(), Mock())
        wrapper.__setstate__({"value": 1})
        assert_equal(wrapper.__getstate__()["value"], 1)
    
        wrapped = Mock()
        wrapped.closed = False
        wrapped.isatty.return_value = True
        stream = ansitowin32.AnsiToWin32(wrapped)
        stream.strip = False
        stream.convert = False
        stream.reset_all()
    
        stream.call_win32 = Mock()
        stream.convert = True
        stream.reset_all()
        stream.call_win32.assert_called_with("m", (0,))
    
        assert_equal(stream.extract_params("H", "2"), (2, 1))
        assert_equal(stream.extract_params("A", ""), (1,))
    
        call_wrapped = Mock()
        call_wrapped.closed = False
        call_wrapped.isatty.return_value = True
        call_stream = ansitowin32.AnsiToWin32(call_wrapped)
        fake_term = Mock()
        with patch.object(ansitowin32, "winterm", fake_term):
            call_stream.win32_calls = {}
>           call_stream.call_win32("J", (2,))

colorama\tests\test_coverage.py:178: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <colorama.ansitowin32.AnsiToWin32 object at 0x000001C194A6BE30>
command = 'J', params = (2,)

    def call_win32(self, command, params):
        if command in self.WIN32_STRATEGIES:
>           self.WIN32_STRATEGIES[command](params)
E           TypeError: AnsiToWin32._strategy_J() missing 1 required positional argument: 'params'

colorama\ansitowin32.py:247: TypeError
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.14.2-final-0 _______________

Name                      Stmts   Miss  Cover   Missing
-------------------------------------------------------
colorama\__init__.py          4      0   100%
colorama\ansi.py             73      0   100%
colorama\ansitowin32.py     167     32    81%   191-208, 211-217, 220, 223, 226, 229-231, 262
colorama\initialise.py       66      1    98%   70
colorama\win32.py            95      0   100%
colorama\winterm.py         136      0   100%
-------------------------------------------------------
TOTAL                       541     33    94%
=========================== short test summary info ===========================
FAILED colorama/tests/ansitowin32_test.py::AnsiToWin32Test::testCallWin32UsesLookup
FAILED colorama/tests/test_coverage.py::test_ansitowin32_state_and_calls - Ty...
================== 2 failed, 50 passed, 14 skipped in 1.26s ===================


=== PYTEST STDERR ===

